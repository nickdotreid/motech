<div class="form-group centered">
    <div class="form-inline btn-group">
        <span class="validation-area form-group">
            <div class="input-append input-group">
                <input class="form-control input-auto offset-1" ng-change="selectParam(filter, 'trigger', option)" name="autocomplete" type="text" id="appendedDropdownButton" ng-model="filter.displayName"/>
                <div class="btn-group">
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li class="dropdown-submenu">
                            <a tabindex="-1">{{msg('task.header.trigger')}}</a>
                            <ul class="dropdown-menu">
                                <li ng-repeat="option in selectedTrigger.eventParameters">
                                    <a ng-click="selectParam(filter, 'trigger', option)">{{taskMsg(option.displayName)}}</a>
                                </li>
                            </ul>
                        </li>
                        <li ng-show="ds.displayName != undefined" class="dropdown-submenu" ng-repeat="ds in task.taskConfig.steps">
                            <a tabindex="-1">{{taskMsg(ds.displayName)}}#{{ds.objectId}} ({{msg(ds.providerName)}})</a>
                            <ul class="dropdown-menu">
                                <li ng-repeat="field in findObject(ds.providerId, ds.type).fields">
                                    <a ng-click="selectParam(filter, 'ad', ds, field)">{{taskMsg(field.displayName)}}</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <ng-switch on="getPopoverType(filter)">
                <span ng-switch-when="STRING" class="btn btn-danger popoverEvent" manipulationpopover="STRING" data-type="{{filter.type}}">
                    <span class="glyphicon glyphicon-cog"></span>
                </span>
                <span ng-switch-when="DATE" class="btn btn-danger popoverEvent" manipulationpopover="DATE" data-type="{{filter.type}}">
                    <span class="glyphicon glyphicon-cog"></span>
                </span>
                <span ng-switch-default class="btn btn-danger" ng-disabled="true">
                    <span class="glyphicon glyphicon-cog"></span>
                </span>
            </ng-switch>
        </span>
        <span class="validation-area form-group">
            <div class="btn-group offset-1">
                <a class="btn dropdown-toggle dropdown-small-fluid" data-toggle="dropdown" target="_self" href="#" ng-class="{'btn-danger': filter.negationOperator == undefined, 'btn-default': filter.negationOperator !== undefined}" ng-disabled="!filter.key">
                    {{msg(((filter.negationOperator == true || filter.negationOperator == false) && 'task.info.filter.' + filter.negationOperator) || 'task.info.filter.select')}}
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" ng-hide="!filter.key">
                    <li>
                        <a ng-click="filter.negationOperator = true">{{msg('task.info.filter.true')}}</a>
                        <a ng-click="filter.negationOperator = false">{{msg('task.info.filter.false')}}</a>
                    </li>
                </ul>
            </div>
        </span>
        <span class="validation-area form-group">
            <div class="btn-group offset-1">
                <a class="btn dropdown-toggle dropdown-medium-fluid" data-toggle="dropdown" target="_self" href="#" ng-class="{'btn-danger': !filter.operator, 'btn-default': filter.operator}" ng-disabled="filter.negationOperator == undefined">
                    {{msg(filter.operator || 'task.info.filter.select')}}
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" ng-hide="filter.negationOperator == undefined">
                    <li class="dropdown-submenu" ng-repeat="(key, value) in util.FILTER_OPERATORS">
                        <a tabindex="-1">{{msg(key)}}</a>
                        <ul class="dropdown-menu">
                            <li ng-repeat="operator in value.options">
                                <a ng-click="filter.operator = operator; filter.type = value.type">{{msg(operator)}}</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </span>
        <span class="validation-area form-group" ng-class="{'has-error': util.needExpression(filter.operator) && !filter.expression}">
            <input ng-disabled="!filter.operator || !util.needExpression(filter.operator)" ng-model="filter.expression" class="form-control input-auto offset-1" type="text" value=""/>
        </span>
        <span class="form-group">
            <a ng-click="remove()" class="btn btn-small btn-danger offset-1"><i class="fa fa-trash-o"></i></a>
        </span>
    </div>
</div>